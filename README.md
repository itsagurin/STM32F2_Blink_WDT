# STM32F205RG: LED Blinking with Timer and Watchdog

## Project Goal

This project demonstrates the use of a hardware timer (TIM) to create a non-blocking delay for blinking an LED at a specific frequency (5 Hz). It also implements an Independent Watchdog (IWDG) to ensure program stability and recover from potential freezes.

---

## Hardware Setup

* **Microcontroller:** STM32F205RGT6
* **Clock Source:** 16 MHz external crystal (HSE)
* **System Clock (SYSCLK):** Configured to 120 MHz
* **LED:** Connected to pin **PA5**

---

## Peripheral Configuration

### TIM2 (General-Purpose Timer)

The timer is configured to generate an update interrupt with a frequency of **10 Hz** (every 100 ms). This interrupt is used to toggle the LED state.

* **Input Clock:** 60 MHz (from APB1 bus)
* **Prescaler (PSC):** `59999`
    * *Calculation:* `Timer Clock = 60,000,000 Hz / (59999 + 1) = 1000 Hz`
* **Counter Period (ARR):** `99`
    * *Calculation:* `Interrupt Frequency = 1000 Hz / (99 + 1) = 10 Hz`

### IWDG (Independent Watchdog)

The watchdog is configured to trigger a system reset if it is not "refreshed" within approximately **1 second**.

* **Input Clock:** LSI (~32 kHz)
* **Prescaler:** `/32`
    * *Calculation:* `Watchdog Clock = 32,000 Hz / 32 = 1000 Hz`
* **Reload Value:** `1000`
    * *Calculation:* `Reset Timeout = 1000 / 1000 Hz = 1 second`

---

## Program Logic

1.  **Initialization:** All peripherals (GPIO, TIM2, IWDG) are initialized based on the configuration generated by STM32CubeIDE.
2.  **Timer Start:** The `HAL_TIM_Base_Start_IT(&htim2)` function starts TIM2 in interrupt mode.
3.  **Main Loop (`while(1)`):** The program enters an infinite loop. The only task inside this loop is to periodically refresh the watchdog using `HAL_IWDG_Refresh(&hiwdg)`. This serves as a "heartbeat" to signal that the main program is running correctly. A 500 ms delay is added to prevent high CPU usage.
4.  **Interrupt Callback:** Every 100 ms, the timer overflows and triggers the `HAL_TIM_PeriodElapsedCallback` function. Inside this function, `HAL_GPIO_TogglePin()` is called to invert the state of the LED on pin PA5. This action of toggling the state 10 times per second results in a 5 Hz blinking frequency.
